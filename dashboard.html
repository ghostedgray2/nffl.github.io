<a href="https://discord.com/oauth2/authorize?client_id=1223685875448152205&response_type=token&redirect_uri=https%3A%2F%2Fufa-ff.github.io%2Fdashboard&scope=identify">Login with Discord</a> 
<span id="disname"></span><img id="disavatar">
<script src="index.js">
   
</script>
<script>
  window.onload = () => {
      const fragment = new URLSearchParams(window.location.hash.slice(1));
      const [accessToken, tokenType] = [fragment.get('access_token'), fragment.get('token_type')];

      if (!accessToken) {
          window.location.href('/')
      }
  if (accessToken) {
    localStorage.setItem("username", ` ${username}#${discriminator}`)
    localStorage.setItem("avatar", `https://cdn.discordapp.com/avatars/${id}/${avatar}.jpg`)
  }
      fetch('https://discord.com/api/users/@me', {
      headers: {
          authorization: `${tokenType} ${accessToken}`,
      },
      })
      .then(result => result.json())
      .then(response => {
          console.log(response);
          const { username, discriminator, avatar, id} = response;

          //set the welcome username string
          document.getElementById('disname').innerText = localStorage.getItem("username");

          //set the avatar image by constructing a url to access discord's cdn
          document.getElementById("disavatar").src = localStorage.getItem("avatar");
      })
      .catch(console.error);


  };
</script>